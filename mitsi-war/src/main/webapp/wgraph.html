<script type="text/ng-template" id="popups/graphOptions.inline.html">
        <div class="modal-header">
            <h3 class="modal-title" id="modal-title">Options des graphs</h3>
        </div>
        <div class="modal-body" id="modal-body"  >
            <a href="" 
               ng-click="alwaysDisplaySchema=!alwaysDisplaySchema; $event.stopPropagation();"
               class="mitsiCheckOption"
			   ng-class="{'mitsi-grey':!alwaysDisplaySchema}" >
				<i class="glyphicon glyphicon-ok" ></i>
				always display schema name with tables in graphs
			</a>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" type="button" ng-click="closeAndSaveOptionsDialog()">OK</button>
            <button class="btn btn-warning" type="button" ng-click="closeOptionsDialog()">Cancel</button>
        </div>
</script>

<script type="text/ng-template" id="popover.pin.action.html">
    <span>pin&nbsp;table</span>
</script>

<script type="text/ng-template" id="popover.info.action.html">
    <span>display&nbsp;details&nbsp;in&nbsp;left&nbsp;panel</span>
</script>

<script type="text/ng-template" id="popover.sql.action.html">
    <span>Build&nbsp;SQL&nbsp;FROM&nbsp;clause&nbsp;using&nbsp;foreign&nbsp;keys</span>
</script>

<script type="text/ng-template" id="popover.startpath.action.html">
    <span>Use&nbsp;table&nbsp;as&nbsp;start&nbsp;to&nbsp;find&nbsp;paths</span>
</script>

<script type="text/ng-template" id="popover.finishpath.action.html">
    <span>Use&nbsp;table&nbsp;as&nbsp;finish&nbsp;to&nbsp;find&nbsp;paths</span>
</script>

<script type="text/ng-template" id="popover.graphdisplay.html">
    <span>
        Display&nbsp;graph&nbsp;only
    </span>
</script>
 
<script type="text/ng-template" id="popover.sqldisplay.html">
    <span>
        Display&nbsp;SQL&nbsp;built&nbsp;using&nbsp;<span class="tableActionLabelSelected"><a href="" style="color:white;font-size:65%;vertical-align:middle;">SQL</a></span>&nbsp;labels
    </span>
</script>

<script type="text/ng-template" id="popover.pathsdisplay.html">
    <div style="text-align: center;">
        Display&nbsp;paths&nbsp;built&nbsp;using&nbsp;<img style="transform: scale(-1, 1);" src="img/flag_path.png"/>&nbsp;and&nbsp;<img src="img/flag_path.png"/>
    </div>
</script>

<script type="text/ng-template" id="popover.optionsdisplay.html">
    <div style="text-align: center;">
        Display&nbsp;options
    </div>
</script>

<script type="text/ng-template" id="popover.cleargraph.html">
    <div style="text-align: center;">
        Clear&nbsp;graphs,&nbsp;paths&nbsp;and&nbsp;SQL
    </div>
</script>

<script type="text/ng-template" id="popover.urlgraph.url.html">
    <div ng-show="graphUrl!=null" style="text-align: center;">
		Share&nbsp;your&nbsp;graph&nbsp;by&nbsp;using&nbsp;this&nbsp;URL&nbsp;:<br/>
    	<a href="{{ graphUrl }}">{{ graphUrl.length>80?graphUrl.substr(0, 80)+"...":graphUrl }}</a>
	</div>
    <div ng-show="graphUrl==null" style="text-align: center;">
		The&nbsp;graph&nbsp;is&nbsp;empty.
        First&nbsp;build&nbsp;a&nbsp;graph&nbsp;you&nbsp;want&nbsp;to&nbsp;share.
	</div>
</script>

 <div style="position:absolute">
  <div style="z-index:10;">
  	<table class="verticalMenuTable">
  	<tr><td ng-class="{'verticalMenuTdSelected':graphOpacity=='1.0'}"  class="verticalMenuTd">
  		<a href="" ng-click="displayGraph()"
			popover-template="'popover.graphdisplay.html'"
			popover-class="verticalMenuPopover"
			popover-trigger="mouseenter"
			popover-placement="right"
		>Graph</a></td></tr>
  	<tr><td ng-class="{'verticalMenuTdSelected':showSQL}"  class="verticalMenuTd">
  		<a href="" ng-click="displaySQL()"
			popover-template="'popover.sqldisplay.html'"
			popover-class="verticalMenuPopover"
			popover-trigger="mouseenter"
			popover-placement="right"
  		>SQL</a></td></tr>
  	<tr><td ng-class="{'verticalMenuTdSelected':showPaths}"  class="verticalMenuTd">
  		<a href="" ng-click="displayPaths()"
			popover-template="'popover.pathsdisplay.html'"
			popover-class="verticalMenuPopover"
			popover-trigger="mouseenter"
			popover-placement="right"
  		>Paths</a></td></tr>
  	<tr><td class="verticalMenuTd">
  		<a href="" ng-click="showOptionsDialog()"
 			popover-template="'popover.optionsdisplay.html'"
			popover-class="verticalMenuPopover"
			popover-trigger="mouseenter"
			popover-placement="right"
  		><i class="glyphicon glyphicon-option-horizontal" style="font-size:120%;"></i></a></td></tr>
  	<tr><td style="height:150px">
  	  <rzslider rz-slider-model="zoomSlider.value" rz-slider-options="zoomSlider.options"></rzslider>
    </td></tr>
  	<tr><td ng-class="{'verticalMenuTdSelected':false}"  class="verticalMenuButtonTd" >
  		<a href="" ng-click="removeAllTables()"
			popover-template="'popover.cleargraph.html'"
			popover-class="verticalMenuPopover"
			popover-trigger="mouseenter"
			popover-placement="right"
  		><i class="glyphicon glyphicon-remove"></i>&nbsp;clear</a></td></tr>
  	<tr><td ng-class="{'verticalMenuTdSelected':false}"  class="verticalMenuButtonTd" >
  		<a href="" ng-click="showPermalink()"
			popover-template="'popover.urlgraph.url.html'"
			popover-class="verticalMenuPopover"
			popover-trigger="click"
			popover-placement="right"
  		><i class="glyphicon glyphicon-link"></i>&nbsp;&nbsp;url</a></td></tr>
  	</table>
  </div>
  <div
  	ng-show="showSQL==true" 
  	style="z-index:2;font-familly:Monospace;color:#707070;font-weight: bold;position:absolute;top:5px;left:80px;width:1200px;">
  <span ng-repeat="text in sqlText">{{ text }}<br/></span>
  <span style="background-color:grey;font-weight:bold;padding-left:2px;padding-right:2px;border-radius:2px;"
  	    ng-show="sqlText.length > 0"
  		ng-click="removeAllTablesInSQL();">
  	<a href=""  
  	   style="color:white;"
  	   >clear</a>
  </span>
  </div>
  <div
  	ng-show="showPaths==true" 
  	style="z-index:3;font-familly:Monospace;color:#707070;font-weight: bold;position:absolute;top:20px;left:80px;width:1200px;">
   <div ng-repeat="path in paths" style="margin-bottom:10px">
       <svg ng-repeat-start="pt in path" height="24px" width="12px" style="vertical-align:bottom;">
      	  <polygon style="fill:lightgreen;" points="0,0 12,12 0,24 12,24 12,0"/>
        </svg><span
         style="vertical-align:bottom;display:inline-block;background-color:lightgreen;height:24px;">
         <a href="" 
            ng-click="appendTableNoStacking(80, 100, getPathIndexName(pt))"
            ng-class="{ anchorDisabled : existsTable(getPathIndexName(pt)) }">
           {{ getPathIndexName(pt) }}
         </a>
         </span><svg ng-repeat-end height="24px" width="12px" style="vertical-align:bottom;">
          <polygon style="fill:lightgreen;" points="0,0 0,24 12,12"/>
       </svg>
   </div>
   <div ng-repeat="path in rpaths" style="margin-bottom:10px">
       <svg ng-repeat-start="pt in path" height="24px" width="12px" style="vertical-align:bottom;">
      	  <polygon style="fill:lightgreen;" points="0,0 12,12 0,24 12,24 12,0"/>
        </svg><span
         style="vertical-align:bottom;display:inline-block;background-color:lightgreen;height:24px;">{{ getPathIndexName(pt) }}
         </span><svg ng-repeat-end height="24px" width="12px" style="vertical-align:bottom;">
          <polygon style="fill:lightgreen;" points="0,0 0,24 12,12"/>
       </svg>
   </div>
  </div>

<div id="jsPlumbContainer"
     style="opacity:{{graphOpacity}};position:absolute;top:0px;left:0px;width:5px;height:5px;transform:scale({{ zoomSlider.value/100  }});"
     >
     

<div ng-repeat="(tableName, t) in tables"
     id="{{divPrefix+t.name}}"
     ng-class="{'linksTableSelected':isTableSelected(t.name), 'linksTableInPath':isTableInPath(t.name), 'linksTableTemporary':isTableTemporary(t.name)}"
	 class="linksTable"
	 style="position:absolute;left:{{t.x}}px;top:{{t.y}}px;min-width:130px;cursor:default;"
	 draggable="true"
	 ng-mouseover="mouseOverTableName(t)"
	 ng-mouseleave="mouseLeaveTableName()"
	 >
	 {{ getTableDisplayName(t.name) }}
	 <a href=""
	    ng-show="showIcons" 
	    ng-click="removeTable(t.name, true)">
		 <i class="glyphicon glyphicon-remove-circle" 
		    style="position:absolute;top:-8px;right:-8px;"></i>
	 </a>
	 <table 
	 		 style="position:absolute;bottom:-16px;left:0px;"><tr>
		 <td style="padding-right:5px;">
		     <a href="" 
		        ng-show="isTableTemporary(t.name)"
		        ng-click="pinTemporaryTable(t.name)"
				popover-template="'popover.pin.action.html'"
				popover-trigger="mouseenter"
				popover-placement="bottom"
				>
			 	<i class="glyphicon glyphicon-pushpin"></i>
			 </a>
		 </td>

		 <td style="padding-right:5px;position:relative;"
		 >
		 	<a href="" 
		 	    style="position:relative;top:-3px;"
		        ng-show="! isTableTemporary(t.name)"
				ng-mouseover="mouseOverAsterisk(t)"
				ng-mouseleave="mouseLeaveAsterisk()"
 		        ng-click="pinTemporaryLinkedTables(t.name)"
 		        >
		        <img src="img/suncat_20px_grey.png" style="height:16px;"/>
		     </a>
		 </td>
		 <td style="padding-right:5px;"
		     ng-class="{ 'mitsiHidden' : showIcons!==true}"
		 >
		 	<a href="" 
		        ng-show="! isTableTemporary(t.name)"
 		        ng-click="requestInfo(t)"
 		        popover-template="'popover.info.action.html'"
				popover-trigger="mouseenter"
				popover-placement="bottom"
 		        >
		        <i class="glyphicon glyphicon-info-sign"></i>
		     </a>
		 </td>
		 <td style="padding-right:5px;position:relative;"
		     ng-class="{ 'mitsiHidden' : showIcons!==true && !isTableInSQL(t)}"
		 >
		   <span 
		        ng-show="! isTableTemporary(t.name)"
		   		ng-class="[ 'tableActionLabel', {'tableActionLabelSelected':isTableInSQL(t)} ]"
		   		>
		  	<a href=""  
		  	    style="color:white;font-size:65%;position:relative;top:-3px;"
		  	    ng-click="toggleTableInSQL(t)"
 		        popover-template="'popover.sql.action.html'"
				popover-trigger="mouseenter"
				popover-placement="bottom"
		  	   >SQL</a>
		  	</span>
		 </td>		 
		 <td style="padding-right:5px;position:relative;"
		 	 ng-class="{ 'mitsiHidden' : showIcons!==true && !isTablePathStart(t)}"
		 >
		 	<span 
		 	    style="position:relative;top:-2px;"
		 		ng-show="! isTableTemporary(t.name)"
		 		ng-class="[ {'tableActionLabelSelected':isTablePathStart(t)} ]">
		 	  <a href="" ng-click="setTablePathStart(t)"
 		        popover-template="'popover.startpath.action.html'"
				popover-trigger="mouseenter"
				popover-placement="bottom"
		 	  >
		 	    <img style="transform: scale(-1, 1);" src="img/flag_path.png"/>
		 	  </a>
		   </span>
		 </td>
		 <td style="padding-right:5px;position:relative;"
		 	 ng-class="{ 'mitsiHidden' : showIcons!==true && !isTablePathEnd(t)}"
		 >
		   <span 
		 	    style="position:relative;top:-2px;"
		   		ng-show="! isTableTemporary(t.name)"
		   		ng-class="[ {'tableActionLabelSelected':isTablePathEnd(t)} ]">
		 	  <a href="" ng-click="setTablePathEnd(t)"
		 	    popover-template="'popover.finishpath.action.html'"
				popover-trigger="mouseenter"
				popover-placement="bottom"
		 	  >
		 	    <img src="img/flag_path.png"/>
		 	  </a>
		   </span>
		 </td>
	 </tr></table>
	 
</div>
</div>
</div>
