<div>
	<a href="" ng-click="sqlStopAll()" >
		<i class="glyphicon glyphicon-stop sqlMenuButton" ></i>
	</a>
	<a href="" ng-click="sqlTrashAll()" >
		<i class="glyphicon glyphicon-trash sqlMenuButton" ></i>
	</a>
	<a href="" ng-click="undo" ng-class="{'anchorDisabled' : undoCommands.length==0}">
		<i class="glyphicon glyphicon-share-alt sqlMenuButton fliVertically"></i>
	</a>
	<a href="" ng-click="redo" ng-class="{'anchorDisabled' : redoCommands.length==0}">
		<i class="glyphicon glyphicon-share-alt sqlMenuButton"></i>
	</a>
</div>
<div ng-repeat="sql in sqlList  track by $index"
     style="margin-top:3px;margin-bottom:3px;"
>
	<hr>
	<table><tr><td style="vertical-align:top;">

		<a href="" ng-click="sql.isHidden=!sql.isHidden" style="margin:3px;">
			<i class="glyphicon" ng-class="{'glyphicon-minus':!sql.isHidden, 'glyphicon-plus':sql.isHidden}"></i>
		</a>

	</td><td ng-hide="!sql.isHidden" style="font-family:monospace;font-style: italic;color:grey;">
		{{ getShortSql(sql) }}
		<a href="" ng-click="sqlRun($index)"  ng-class="{'anchorDisabled' : currentSource==null || sql.status==SQL_STATUS.RUNNING }">
			<i class="glyphicon glyphicon-play" ng-class="{'fast-right-spinner' : sql.status==SQL_STATUS.RUNNING}"></i>
		</a>
		<a href="" ng-click="sqlStop($index)" ng-class="{'anchorDisabled' : sql.status!=SQL_STATUS.RUNNING}">
			<i class="glyphicon glyphicon-stop"></i>
		</a>
		<a href="" ng-click="sqlTrash($index)" ng-class="{'anchorDisabled' : sql.status==SQL_STATUS.RUNNING}">
			<i class="glyphicon glyphicon-trash" ></i>
		</a>
		<span ng-if="sql.duration">time: {{ sql.duration }}</span>

	</td><td ng-hide="sql.isHidden">
		<ui-codemirror
				ui-codemirror-opts="editorOptions"
				ng-model="sql.sqlText"
				ng-keypress="sqlTextKeyPress($event, $index)"
		></ui-codemirror>
		<div>
			<a href="" ng-click="sqlRun($index)"  ng-class="{'anchorDisabled' : currentSource==null || sql.status==SQL_STATUS.RUNNING }">
				<i class="glyphicon glyphicon-play" ng-class="{'fast-right-spinner' : sql.status==SQL_STATUS.RUNNING}"></i>
			</a>
			<a href="" ng-click="sqlStop($index)" ng-class="{'anchorDisabled' : sql.status!=SQL_STATUS.RUNNING}">
				<i class="glyphicon glyphicon-stop"></i>
			</a>
			<a href="" ng-click="sqlTrash($index)" ng-class="{'anchorDisabled' : sql.status==SQL_STATUS.RUNNING}">
				<i class="glyphicon glyphicon-trash" ></i>
			</a>
			<span ng-if="sql.duration">time: {{ sql.duration }}</span>
			timeout :
			<select ng-model=sql.timeout>
			  <option value="0">default</option>
			  <option value="600">10min</option>
			  <option value="1800">30min</option>
			</select>
		</div>
		<div class="sqlError" ng-class="{'sqlErrorSqlRunning' : sql.status==SQL_STATUS.RUNNING}">
			{{ sql.error }}
		</div>
		<table ng-class="{'sqlTableWhenRunning' : sql.status==SQL_STATUS.RUNNING}"
			   class="sqlTable">
			<tr>
				<th ng-repeat="col in sql.columns track by $index">
					{{ col.name }}
				</th>
			</tr>
			<tr ng-repeat="r in sql.result track by $index" >
				<td ng-repeat="cell in r  track by $index" >
					{{ cell }}
				</td>
			</tr>
		</table>
	</td></tr></table>
</div>