
<body data-ng-app="mitsiApp" class="container">

    <a href="" ng-click="refresh();$event.stopPropagation();"
       ng-if="detailsSections.length == 0 && loading"
       style="padding:5px;font-size:120%;"/>
    	<i class="glyphicon glyphicon-refresh"
    	   ng-class="{'fast-right-spinner':loading}" 
    	></i>
    </a>
    
	<accordion close-others="false">
		<accordion-group 
			ng-repeat="section in detailsSections" 
			is-open="section.isOpen"
			 >
		    <accordion-heading>
	        	<i class="glyphicon " 
	        	   ng-class="{'glyphicon-chevron-down': section.isOpen, 'glyphicon-chevron-right': !section.isOpen}">
	        	   </i>
			    {{ section.title }}
			    
			    <a href="" ng-click="refresh();$event.stopPropagation();">
			    	<i class="pull-right glyphicon glyphicon-refresh"
			    	   ng-class="{'fast-right-spinner':loading}" 
			    	></i>
			    </a>
			</accordion-heading>
			
			<table class="mitsiDetailsQuickFindTable"><tr>
				<td class="mitsiDetailsQuickFindLabel">quick find : </td>
				<td style="position:absolute">
					<a href="" 
						class="glyphicon glyphicon-remove mitsiDetailsQuickFindReset" 
						ng-click="section.filter=null; $event.stopPropagation();"></a>
					<input type="text" class="mitsiDetailsQuickFindInput" ng-model="section.filter"/>
				</td>
			</tr></table>
			<table class="table-striped" style="width:100%;">
			<thead>
				<tr>
					<th ng-repeat="column in section.columns"
					    class="mitsiDetailsTableHeader">
						{{ prettyColumnTitle(column.name) }}
					</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="myrow in section.data"
					ng-hide="isRowExcludedByFilter(section, myrow)"
				>
			 	  <td ng-repeat="d in myrow track by $index" 
			 	  	  class="mitsiDetailsTableTd"
			 	  >
			 	  <span ng-if="section.columns[$index].displayType==null || section.columns[$index].displayType=='NORMAL'">{{ d }}</span>
			 	  <i    ng-if="section.columns[$index].displayType=='FK_DIRECTION' && d=='toTheTable'"   class="glyphicon glyphicon-log-in"></i>
			 	  <i    ng-if="section.columns[$index].displayType=='FK_DIRECTION' && d=='fromTheTable'" class="glyphicon glyphicon-log-out"></i>
			 	  <a    ng-if="section.columns[$index].displayType=='TABLE_LINK' " href="" ng-click="selectTable(d)">{{ d }}</a>
			 	  </td>
				</tr>
			</tbody>
			</table>
			

	    </accordion-group>
	</accordion>
</body>
</html>