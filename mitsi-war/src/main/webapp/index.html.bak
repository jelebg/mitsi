<!DOCTYPE html>
<html style="height: 100%">
<head>
<TITLE>Mitsi test</TITLE>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />


<script>

function run() {
	var message = {
		"sql" : "select tutu titi", //gid("sql").textContent
		"message" : "ceci est mon message"
	};
	var json = JSON.stringify(message);

	// exceptionnellement on travaille en synchrone
	var xhr = new XMLHttpRequest();
	xhr.open("POST", "TestGsonServlet", true);
	xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');

	xhr.onreadystatechange = function() {
		if (xhr.readyState == 4) {
			if (xhr.status != 200) {
				alert(xhr.status + " : " + xhr.statusText);
			} else {
				console.log(xhr.responseText);
				
				//var response = JSON.parse(xhr.responseText);
				//document.getElementById("descriptionTextArea").value = reponse["description"];
				
				//data = response.data;
				//hot.render();
				
				/*hot.destroy();
				hot = new Handsontable(gid("example"), {
					data : response.data,
					minSpareRows : 1,
					colHeaders : true,
					contextMenu : true,
					//afterChange : function() {
					//	console.log(JSON.stringify(response.data));
					//},
					manualColumnResize : true,
					manualColumnMove : true,
					colHeaders : response.header

				});*/


			}
		}
	}

	xhr.send(json);
}

</script>

</head>
<body>


<button onclick="run();">click me !</button>


</body>
</html>